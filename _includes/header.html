<div>
    <div id="header" style="width: 100%; display: flex; flex-direction: row; margin-top: -90px;">
        <div style="width: 100%; display: flex; flex-direction:column;">
            <h1 style="width: 100%; display: flex; justify-content:space-between; align-items: center;">
                <a id="title" href="/">{{ site.title }}</a>
                <div>
                    <a id="darkmode-icon" href="#0"></a>
                    <a id="search-icon" href="/singularity/src/search">ðŸ”Ž</a>
                </div>
            </h1>
        </div>
    </div>
</div>

<script src="{{ site.baseurl }}{% link assets/js/search-worker.js %}?v={{ site.time | date:'%s' }}"></script>

<script>
    let urlprefix = "";

    const redundant_title = document.querySelector('h1');
    if (redundant_title) {
        redundant_title.style.opacity = 0;
    }

    const title = document.getElementById("title");
    if (title) {
        title.href = urlprefix == "" ? "/" : "/" + urlprefix;
    }

    const search = document.getElementById("search-icon");
    if (search) {
        search.href = urlprefix == "" ? "/src/search" : "/" + urlprefix + "/src/search";
    }

    const worker = new Worker("{{ site.baseurl }}{% link assets/js/search-worker.js %}?v={{ site.time | date:'%s' }}");    
</script>

<script defer src="{{ site.baseurl }}{% link assets/js/sync-search.js %}?v={{ site.time | date:'%s' }}"></script>

{% if jekyll.environment == "production" %}
<script>
    urlprefix = "singularity";
</script>
{% endif %}